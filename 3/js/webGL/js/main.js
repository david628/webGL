"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),Earth=function(){function e(t){_classCallCheck(this,e),this.selectableCountries=[],this.countryData={},this.radius=100,this.segments=60,this.rotationSpeed=1,this.reverseWeaponLookup={},this.selectionData=null,this.previouslySelectedCountry=null,this.selectedCountry=null,this.markers=[],this.mouseX=0,this.mouseY=0,this.pmouseX=0,this.pmouseY=0,this.pressX=0,this.pressY=0,this.dragging=!1,this.rotateX=0,this.rotateY=0,this.rotateVX=0,this.rotateVY=0,this.rotateXMax=90*Math.PI/180,this.rotateTargetX=0,this.rotateTargetY=0,this.keyboard=new THREEx.KeyboardState,this.controllers={spin:0},this.weaponLookup={m:"m",c:"c",a:"a"},this.exportColor=4778678,this.importColor=4778678,this.vec3_origin=new THREE.Vector3(0,0,0),this.apply(this,t),this.wrap=this.el.get?this.el.get(0):"string"==typeof this.el?document.getElementById(this.el):this.el,this.el=document.createElement("div"),this.el.style="user-select: none;",this.wrap.appendChild(this.el),this.containt=document.createElement("div"),this.containt.style="user-select: none;",this.wrap.appendChild(this.containt),this.initScene()}return _createClass(e,[{key:"apply",value:function(e,t){if(e&&t&&"object"==(void 0===t?"undefined":_typeof(t)))for(var r in t)e[r]=t[r];return e}},{key:"initScene",value:function(){this.renderer||(this.renderer=new THREE.WebGLRenderer({antialias:!1,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.autoClear=!1,this.renderer.sortObjects=!1,this.renderer.generateMipmaps=!1,this.el.appendChild(this.renderer.domElement)),this.scene||(this.scene=new THREE.Scene,this.scene.matrixAutoUpdate=!1),this.camera||(this.camera=new THREE.PerspectiveCamera(12,window.innerWidth/window.innerHeight,1,2e4),this.camera.position.z=1400,this.camera.position.y=0,this.scene.add(this.camera)),this.rotating||(this.rotating=new THREE.Object3D,this.scene.add(this.rotating)),this.visualizationMesh||(this.visualizationMesh=new THREE.Object3D,this.rotating.add(this.visualizationMesh)),this.sphere||(this.sphere=new THREE.Mesh(new THREE.SphereGeometry(this.radius,this.segments,this.segments),new THREE.MeshLambertMaterial({color:4778678,opacity:.8,map:new THREE.ImageUtils.loadTexture("js/webGL/images/earth_political_alpha.png")})),this.rotating.add(this.sphere)),this.initEffect(),this.initLinght(),THREEx.WindowResize(this.renderer,this.camera),this.initTrackballControls()}},{key:"initLinght",value:function(){var e=new THREE.PointLight(13696511,3.2,0);e.position.set(0,0,600),this.scene.add(e);var t=new THREE.DirectionalLight(8321791,.5);t.position.set(400,400,100),this.scene.add(t)}},{key:"initEffect",value:function(){this.sphere.add(new THREE.Mesh(new THREE.SphereGeometry(this.radius+1,50,50),new THREE.MeshLambertMaterial({transparent:!0,color:16745280,blending:THREE.AdditiveBlending,opacity:.8,map:new THREE.ImageUtils.loadTexture("js/webGL/images/fire4.png")})))}},{key:"initMap",value:function(){THREE.EdgesGeometry||(THREE.Geometry.prototype.clone=function(){return(new THREE.Geometry).copy(this)},THREE.Geometry.prototype.copy=function(e){var t,r,a,o,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,r=l.length;t<r;t++)this.colors.push(l[t].clone());var h=e.faces;for(t=0,r=h.length;t<r;t++)this.faces.push(h[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),a=0,o=c.length;a<o;a++){var u=c[a],d=[];for(i=0,n=u.length;i<n;i++){var m=u[i];d.push(m.clone())}this.faceVertexUvs[t].push(d)}}var v=e.morphTargets;for(t=0,r=v.length;t<r;t++){var p={};if(p.name=v[t].name,void 0!==v[t].vertices)for(p.vertices=[],a=0,o=v[t].vertices.length;a<o;a++)p.vertices.push(v[t].vertices[a].clone());if(void 0!==v[t].normals)for(p.normals=[],a=0,o=v[t].normals.length;a<o;a++)p.normals.push(v[t].normals[a].clone());this.morphTargets.push(p)}var g=e.morphNormals;for(t=0,r=g.length;t<r;t++){var y={};if(void 0!==g[t].vertexNormals)for(y.vertexNormals=[],a=0,o=g[t].vertexNormals.length;a<o;a++){var f=g[t].vertexNormals[a],E={};E.a=f.a.clone(),E.b=f.b.clone(),E.c=f.c.clone(),y.vertexNormals.push(E)}if(void 0!==g[t].faceNormals)for(y.faceNormals=[],a=0,o=g[t].faceNormals.length;a<o;a++)y.faceNormals.push(g[t].faceNormals[a].clone());this.morphNormals.push(y)}return this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},THREE.EdgesGeometry=function(e,t){THREE.BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,a,o,i,n=[],s=Math.cos(THREE.Math.DEG2RAD*t),l=[0,0],h={},c=["a","b","c"];console.log(e),e.isBufferGeometry?(i=new THREE.Geometry,i.fromBufferGeometry(e)):i=e.clone(),i.mergeVertices(),i.computeFaceNormals();for(var u=i.vertices,d=i.faces,m=0,v=d.length;m<v;m++)for(var p=d[m],g=0;g<3;g++)r=p[c[g]],a=p[c[(g+1)%3]],l[0]=Math.min(r,a),l[1]=Math.max(r,a),o=l[0]+","+l[1],void 0===h[o]?h[o]={index1:l[0],index2:l[1],face1:m,face2:void 0}:h[o].face2=m;for(o in h){var y=h[o];if(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=s){var f=u[y.index1];n.push(f.x,f.y,f.z),f=u[y.index2],n.push(f.x,f.y,f.z)}}},THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry),THREE.LineSegments||(THREE.LineSegments=function(e,t){THREE.Line.call(this,e,t),this.type="LineSegments"}),THREE.EdgesHelper||(THREE.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new THREE.LineSegments(new THREE.EdgesGeometry(e.geometry),new THREE.LineBasicMaterial({color:void 0!==t?t:16777215}))});var e;for(var t in country_data){e=new Tessalator3D(country_data[t],0);country_data[t].data.cont,new THREE.Color(68674);var r=country_data[t].mesh=new THREE.Mesh(e,new THREE.MeshLambertMaterial({emissive:68674}));this.rotating.add(r)}}},{key:"initTrackballControls",value:function(){var e=this;this.renderer.domElement.addEventListener("windowResize",function(t){e.onDocumentResize(t)},!1),this.renderer.domElement.addEventListener("mousedown",function(t){e.onDocumentMouseDown(t)},!0),this.renderer.domElement.addEventListener("mousemove",function(t){e.onDocumentMouseMove(t)},!0),this.renderer.domElement.addEventListener("mouseup",function(t){e.onDocumentMouseUp(t)},!1),this.renderer.domElement.addEventListener("mousewheel",function(t){e.onMouseWheel(t)},!1),this.renderer.domElement.addEventListener("DOMMouseScroll",function(t){e.onMouseWheel(window.event||t)},!1)}},{key:"onDocumentResize",value:function(e){}},{key:"onDocumentMouseDown",value:function(e){this.dragging=!0,this.pressX=this.mouseX,this.pressY=this.mouseY,this.rotateTargetX=void 0,this.rotateTargetX=void 0}},{key:"onDocumentMouseMove",value:function(e){this.pmouseX=this.mouseX,this.pmouseY=this.mouseY,this.mouseX=e.clientX-.5*window.innerWidth,this.mouseY=e.clientY-.5*window.innerHeight,this.dragging&&(0==this.keyboard.pressed("shift")?(this.rotateVY+=(this.mouseX-this.pmouseX)/2*Math.PI/180*.3,this.rotateVX+=(this.mouseY-this.pmouseY)/2*Math.PI/180*.3):(this.camera.position.x-=.5*(this.mouseX-this.pmouseX),this.camera.position.y+=.5*(this.mouseY-this.pmouseY)))}},{key:"onDocumentMouseUp",value:function(e){this.dragging=!1}},{key:"onMouseWheel",value:function(e){var t=0;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t&&(this.camera.scale.z+=.1*t,this.camera.scale.z=this.constrain(this.camera.scale.z,.7,5)),e.returnValue=!1}},{key:"loadGeoData",value:function(e){for(var t in e){var r=e[t];r.countryCode=t,r.countryName=t;var a=r.lat,o=r.lon,i=i=(90-a)*Math.PI/180,n=(360-o)*Math.PI/180,s=new THREE.Vector3;s.x=this.radius*Math.sin(i)*Math.cos(n),s.y=this.radius*Math.cos(i),s.z=this.radius*Math.sin(i)*Math.sin(n),r.center=s,this.countryData[r.countryName]=r}}},{key:"makeConnectionLineGeometry",value:function(e,t,r,a){if(void 0!=e.countryName&&void 0!=t.countryName){var o=e.center.clone().subSelf(t.center).length(),e=(this.radius,e.center),t=t.center,i=e.clone().lerpSelf(t,.5),n=i.length();i.normalize(),i.multiplyScalar(n+.5*o);var s=(new THREE.Vector3).sub(e,t);s.normalize();var l=.5*o,h=e,c=i.clone().addSelf(s.clone().multiplyScalar(l)),u=i.clone().addSelf(s.clone().multiplyScalar(-l)),d=t,m=new THREE.CubicBezierCurve3(e,h,c,i),v=new THREE.CubicBezierCurve3(i,u,d,t),p=2*Math.floor(.02*o+6),g=m.getPoints(p);g=g.splice(0,g.length-1),g=g.concat(v.getPoints(p)),g.push(this.vec3_origin);var y=.1*r,f=10+Math.sqrt(y);f=this.constrain(f,30,60);for(var E=new THREE.Geometry,T=0;T<g.length;T++)E.vertices.push(g[T]);return E.size=f,E}}},{key:"selectVisualization",value:function(e,t,r){var a=e[0];this.previouslySelectedCountry=this.selectedCountry,this.selectedCountry=this.countryData[e[0]],this.selectedCountry.summary={imported:{mil:0,civ:0,ammo:0,total:0},exported:{mil:0,civ:0,ammo:0,total:0},total:0,historical:this.getHistoricalData(this.selectedCountry)};for(var o in this.countryData){var i=this.countryData[o];i.exportedAmount=0,i.importedAmount=0,i.mapColor=0}for(var o in this.selectableCountries)this.removeMarkerFromCountry(this.selectableCountries[o]);for(;this.visualizationMesh.children.length>0;){var n=this.visualizationMesh.children[0];this.visualizationMesh.remove(n)}var s=this.getVisualizedMesh(this.data,e,t,r);this.visualizationMesh.add(s),0==s.affectedCountries.length&&s.affectedCountries.push(a);for(var o in s.affectedCountries){var l=s.affectedCountries[o],i=this.countryData[l];this.attachMarkerToCountry(l,i.mapColor)}if(this.highlightCountry(s.affectedCountries),this.previouslySelectedCountry!==this.selectedCountry&&this.selectedCountry){this.rotateTargetX=this.selectedCountry.lat*Math.PI/180;for(var h=-(this.selectedCountry.lon-9)*Math.PI/180,c=0;;){var u=h-2*Math.PI*c,d=h+2*Math.PI*c;if(Math.abs(u-this.rotating.rotation.y)<Math.PI){this.rotateTargetY=u;break}if(Math.abs(d-this.rotating.rotation.y)<Math.PI){this.rotateTargetY=d;break}c++,this.rotateTargetY=wrap(h,-Math.PI,Math.PI)}this.rotateVX*=.6,this.rotateVY*=.6}}},{key:"getVisualizedMesh",value:function(e,t,r,a){for(var o in t)t[o]=t[o];var i=[],n=new THREE.Geometry,s=[],l=new THREE.Geometry,h=[];for(o in e){var c=e[o],u=c.source,d=c.target,m=this.indexOfArr(u,t)>=0,v=this.indexOfArr(d,t)>=0,p=m,g=v,y=this.reverseWeaponLookup[c.type];m&&this.indexOfArr(y,r),v&&this.indexOfArr(y,a);if(g||p){if(void 0===c.lineGeometry)continue;var f=!1;u==this.selectedCountry.countryName&&(f=!0);var E,T=f?new THREE.Color(this.exportColor):new THREE.Color(this.importColor);for(R in c.lineGeometry.vertices){var C=c.lineGeometry.vertices[R];s.push(T),E=T}THREE.GeometryUtils.merge(n,c.lineGeometry);var x=E.clone(),w=c.lineGeometry.vertices,M=Math.floor(c.value/8e3/c.lineGeometry.vertices.length)+1;M=this.constrain(M,1,100);for(var H=c.lineGeometry.size,R=0;R<M;R++){var b=R/M*w.length,k=this.constrain(Math.floor(b),0,w.length-1),X=w[k],D=X.clone();D.moveIndex=k,D.nextIndex=k+1,D.nextIndex>=w.length&&(D.nextIndex=0),D.lerpN=0,D.path=w,l.vertices.push(D),D.size=H,h.push(x)}this.indexOfArr(u,i)<0&&i.push(u),this.indexOfArr(d,i)<0&&i.push(d);var z=c.value,N=this.countryData[u];void 0===N.mapColor?N.mapColor=z:N.mapColor+=z;var G=this.countryData[d];void 0===G.mapColor?G.mapColor=z:G.mapColor+=z,N.exportedAmount+=z,G.importedAmount+=z,N==this.selectedCountry&&(this.selectedCountry.summary.exported[c.type]+=c.value,this.selectedCountry.summary.exported.total+=c.value),G==this.selectedCountry&&(this.selectedCountry.summary.imported[c.type]+=c.value,this.selectedCountry.summary.imported.total+=c.value),G!=this.selectedCountry&&N!=this.selectedCountry||(this.selectedCountry.summary.total+=c.value)}}n.colors=s;var S=new THREE.Line(n,new THREE.LineBasicMaterial({color:16777215,opacity:.7,blending:THREE.AdditiveBlending,transparent:!0,depthWrite:!1,vertexColors:!0,linewidth:1}));S.renderDepth=!1;var L={size:{type:"f",value:[]},customColor:{type:"c",value:[]}},V=new THREE.ShaderMaterial({uniforms:{amplitude:{type:"f",value:1},color:{type:"c",value:new THREE.Color(16777215)},texture:{type:"t",value:0,texture:THREE.ImageUtils.loadTexture("js/webGL/images/particleA.png")}},attributes:L,vertexShader:["uniform float amplitude;","attribute float size;","attribute vec3 customColor;","varying vec3 vColor;","void main() {","vColor = customColor;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_PointSize = size;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D texture;","varying vec3 vColor;","void main() {","gl_FragColor = vec4( color * vColor, 1.0 );","gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );","}"].join("\n"),blending:THREE.AdditiveBlending,depthTest:!0,depthWrite:!1,transparent:!0}),Y=THREE.ImageUtils.loadTexture("js/webGL/images/particleA.png");new THREE.ParticleBasicMaterial({map:Y,color:16777215,size:1,blending:THREE.NormalBlending,transparent:!0,depthWrite:!1,vertexColors:!0,sizeAttenuation:!0});l.colors=h;var I=new THREE.ParticleSystem(l,V);I.dynamic=!0,S.add(I);for(var U=I.geometry.vertices,P=L.size.value,A=L.customColor.value,C=0;C<U.length;C++)P[C]=I.geometry.vertices[C].size,A[C]=h[C];return I.update=function(){for(var e in this.geometry.vertices){var t=this.geometry.vertices[e],r=t.path;r.length;t.lerpN+=.05,t.lerpN>1&&(t.lerpN=0,t.moveIndex=t.nextIndex,++t.nextIndex>=r.length&&(t.moveIndex=0,t.nextIndex=1));var a=r[t.moveIndex],o=r[t.nextIndex];t.copy(a),t.lerpSelf(o,t.lerpN)}this.geometry.verticesNeedUpdate=!0},S.affectedCountries=i,S}},{key:"attachMarkerToCountry",value:function(e,t){e=e;var r=this.countryData[e];if(void 0!==r){var a=document.createElement("div");a.className="earth-marker",a.innerHTML='<div class="earth-detailText"></div>',r.marker=a,this.containt.appendChild(a),a.countryName=e,a.importance=t,a.selected=!1,a.hover=!1,e===this.selectedCountry.countryName&&(a.selected=!0),a.setPosition=function(e,t,r){this.style.left=e+"px",this.style.top=t+"px",this.style.zIndex=r},a.setVisible=function(e){this.style.display=e?"inline":"none"};var o=a.querySelector(".earth-detailText");o.innerHTML=e,a.detailLayer=o,a.setSize=function(e){Math.floor(2+.5*e)};var i=this;a.update=function(){var e=i.rotating.matrixWorld,t=e.multiplyVector3(r.center.clone()),a=i.screenXY(t),o=.3+1*i.camera.scale.z,n=this.importance/5e6;n=i.constrain(n,0,18),o+=n,this.tiny&&(o*=.75),this.selected&&(o=30),this.hover&&(o=15),this.setSize(o),this.setVisible(t.z>60);var s=Math.floor(1e3-t.z+o);(this.selected||this.hover)&&(s=1e4),this.setPosition(a.x,a.y,s)};var n=t<2e7&&!a.selected;a.tiny=n,o.innerHTML=e,this.markers.push(a)}}},{key:"getHistoricalData",value:function(e){}},{key:"highlightCountry",value:function(){}},{key:"load",value:function(e){this.animate(),this.selectionData={exportCategories:{},importCategories:{}};for(var t in this.weaponLookup)this.selectionData.exportCategories[t]=!0,this.selectionData.importCategories[t]=!0;this.selectionData.getExportCategories=function(){var e=[];for(var t in this.exportCategories)this.exportCategories[t]&&e.push(t);return e},this.selectionData.getImportCategories=function(){var e=[];for(var t in this.importCategories)this.importCategories[t]&&e.push(t);return e};for(var r={},t=0;t<e.length;t++){var a=e[t].source,o=a.latlon.split(","),i=e[t].target,n=i.latlon.split(",");r[a.name]={lat:o[1],lon:o[0]},r[i.name]={lat:n[1],lon:n[0]}}this.loadGeoData(r);for(var s=[],l=["北京"],t=0;t<e.length;t++)s.push({source:e[t].source.name,target:e[t].target.name,type:"mil",value:1}),l.push(e[t].target.name);this.data=s;for(var h in this.data){var c=this.countryData[this.data[h].source],u=this.countryData[this.data[h].target];void 0!==c&&void 0!==u&&(this.data[h].lineGeometry=this.makeConnectionLineGeometry(c,u,this.data[h].value,this.data[h].type))}this.selectVisualization(["杭州"])}},{key:"constrain",value:function(e,t,r){return e<t?e=t:e>r&&(e=r),e}},{key:"indexOfArr",value:function(e,t){if(!t)return-1;for(var r=0,a=t.length;r<a;r++)if(t[r]==e)return r;return-1}},{key:"screenXY",value:function(e){var t=new THREE.Projector,r=t.projectVector(e.clone(),this.camera),a=window.innerWidth;return a<1280&&(a=1280),{x:Math.round(r.x*(a/2))+a/2,y:Math.round((0-r.y)*(window.innerHeight/2))+window.innerHeight/2}}}]),e}(),earth=new Earth({el:"id-test"});earth.animate=function(){void 0!==earth.rotateTargetX&&void 0!==earth.rotateTargetY&&(earth.rotateVX+=.012*(earth.rotateTargetX-earth.rotateX),earth.rotateVY+=.012*(earth.rotateTargetY-earth.rotateY),Math.abs(earth.rotateTargetX-earth.rotateX)<.1&&Math.abs(earth.rotateTargetY-earth.rotateY)<.1&&(earth.rotateTargetX=void 0,earth.rotateTargetY=void 0)),earth.rotateX+=earth.rotateVX,earth.rotateY+=earth.rotateVY,earth.rotateVX*=.98,earth.rotateVY*=.98,(earth.dragging||void 0!==earth.rotateTargetX)&&(earth.rotateVX*=.6,earth.rotateVY*=.6),earth.rotateY+=.01*earth.controllers.spin,earth.rotateX<-earth.rotateXMax&&(earth.rotateX=-earth.rotateXMax,earth.rotateVX*=-.95),earth.rotateX>earth.rotateXMax&&(earth.rotateX=earth.rotateXMax,earth.rotateVX*=-.95),earth.rotating.rotation.x=earth.rotateX,earth.rotating.rotation.y=earth.rotateY,earth.renderer.clear(),earth.renderer.render(earth.scene,earth.camera),requestAnimationFrame(earth.animate),THREE.SceneUtils.traverseHierarchy(earth.rotating,function(e){void 0!==e.update&&e.update()});for(var e in earth.markers)earth.markers[e].update()};var data={message:"获取告警地图数据成功",data:[{attackrout:[{source:{latlon:"120.153576,30.287459",name:"杭州",value:"7"},target:{latlon:"1.718190,46.710670",name:"法国",value:"7"}},{source:{latlon:"116.405285,39.904989",name:"北京",value:"6"},target:{latlon:"135.718933,35.098129",name:"日本",value:"6"}},{source:{latlon:"1.718190,46.710670",name:"法国",value:"6"},target:{latlon:"120.153576,30.287459",name:"杭州",value:"6"}},{source:{latlon:"127.850166,36.448151",name:"韩国",value:"6"},target:{latlon:"116.405285,39.904989",name:"北京",value:"6"}},{source:{latlon:"1.718190,46.710670",name:"法国",value:"6"},target:{latlon:"102.712251,25.040609",name:"昆明",value:"6"}},{source:{latlon:"135.718933,35.098129",name:"日本",value:"5"},target:{latlon:"1.718190,46.710670",name:"法国",value:"5"}},{source:{latlon:"116.507676,31.752889",name:"六安",value:"5"},target:{latlon:"120.153576,30.287459",name:"杭州",value:"5"}},{source:{latlon:"120.153576,30.287459",name:"杭州",value:"5"},target:{latlon:"127.850166,36.448151",name:"韩国",value:"5"}},{source:{latlon:"120.153576,30.287459",name:"杭州",value:"5"},target:{latlon:"108.830719,59.453751",name:"俄罗斯",value:"5"}},{source:{latlon:"109.939776,33.868319",name:"商洛",value:"5"},target:{latlon:"120.153576,30.287459",name:"杭州",value:"5"}},{source:{latlon:"135.718933,35.098129",name:"日本",value:"5"},target:{latlon:"116.405285,39.904989",name:"北京",value:"5"}},{source:{latlon:"1.718190,46.710670",name:"法国",value:"5"},target:{latlon:"109.939776,33.868319",name:"商洛",value:"5"}},{source:{latlon:"116.405285,39.904989",name:"北京",value:"5"},target:{latlon:"120.153576,30.287459",name:"杭州",value:"5"}},{source:{latlon:"120.153576,30.287459",name:"杭州",value:"5"},target:{latlon:"109.939776,33.868319",name:"商洛",value:"5"}},{source:{latlon:"1.718190,46.710670",name:"法国",value:"5"},target:{latlon:"127.850166,36.448151",name:"韩国",value:"5"}}]}],code:0},json=data.data[0].attackrout;earth.load(json);